# 데이터베이스 덤프파일

```
-- MySQL Script generated by MySQL Workbench
-- Thu Aug 19 15:14:23 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema talkpal
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema talkpal
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `talkpal` DEFAULT CHARACTER SET utf8mb4 ;
USE `talkpal` ;

-- -----------------------------------------------------
-- Table `talkpal`.`lang`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`lang` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`lang` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`user` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`user` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `cnt_follower` BIGINT(20) NULL DEFAULT NULL,
  `cnt_following` BIGINT(20) NULL DEFAULT NULL,
  `cnt_histories` BIGINT(20) NULL DEFAULT NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `imgpath` VARCHAR(255) NULL DEFAULT NULL,
  `introduction` VARCHAR(255) NULL DEFAULT NULL,
  `nickname` VARCHAR(255) NULL DEFAULT NULL,
  `password` VARCHAR(255) NULL DEFAULT NULL,
  `sns` VARCHAR(255) NULL DEFAULT NULL,
  `valid` BIT(1) NOT NULL,
  `lang` BIGINT(20) NULL DEFAULT NULL,
  `avg_score` DOUBLE NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK96n6t18x1a1jbab4p2oxmqs63` (`lang` ASC) VISIBLE,
  CONSTRAINT `FK96n6t18x1a1jbab4p2oxmqs63`
    FOREIGN KEY (`lang`)
    REFERENCES `talkpal`.`lang` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 45
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;

-- -----------------------------------------------------
-- Table `talkpal`.`chatroom`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`chatroom` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`chatroom` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `msg_cnt` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`chatjoininfo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`chatjoininfo` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`chatjoininfo` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `chat_room_id` BIGINT(20) NULL DEFAULT NULL,
  `user_id` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FKqcr6bl0hn6e0ho5nabjesef9c` (`chat_room_id` ASC) VISIBLE,
  INDEX `FKhc82op8cj9lyoer5v8dg0ln7a` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FKhc82op8cj9lyoer5v8dg0ln7a`
    FOREIGN KEY (`user_id`)
    REFERENCES `talkpal`.`user` (`id`),
  CONSTRAINT `FKqcr6bl0hn6e0ho5nabjesef9c`
    FOREIGN KEY (`chat_room_id`)
    REFERENCES `talkpal`.`chatroom` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`chatmessage`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`chatmessage` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`chatmessage` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `message` VARCHAR(255) NULL DEFAULT NULL,
  `chat_room_id` BIGINT(20) NULL DEFAULT NULL,
  `user_id` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FKj6v0kvcs7lkd9wjxqf793lxxe` (`chat_room_id` ASC) VISIBLE,
  INDEX `FKorp8b0vbgyym1qlm20olwt4i4` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FKj6v0kvcs7lkd9wjxqf793lxxe`
    FOREIGN KEY (`chat_room_id`)
    REFERENCES `talkpal`.`chatroom` (`id`),
  CONSTRAINT `FKorp8b0vbgyym1qlm20olwt4i4`
    FOREIGN KEY (`user_id`)
    REFERENCES `talkpal`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`chatroom_join_infos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`chatroom_join_infos` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`chatroom_join_infos` (
  `chat_room_id` BIGINT(20) NOT NULL,
  `join_infos_id` BIGINT(20) NOT NULL,
  PRIMARY KEY (`chat_room_id`, `join_infos_id`),
  UNIQUE INDEX `UK_n9cmeet053a84ne76ycwilwyw` (`join_infos_id` ASC) VISIBLE,
  CONSTRAINT `FK8ccc2mkfu6ny3ju375cyx518p`
    FOREIGN KEY (`chat_room_id`)
    REFERENCES `talkpal`.`chatroom` (`id`),
  CONSTRAINT `FKe7cn911uwc0bl1gsx8k9f19bn`
    FOREIGN KEY (`join_infos_id`)
    REFERENCES `talkpal`.`chatjoininfo` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`chatroom_messages`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`chatroom_messages` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`chatroom_messages` (
  `chat_room_id` BIGINT(20) NOT NULL,
  `messages_id` BIGINT(20) NOT NULL,
  PRIMARY KEY (`chat_room_id`, `messages_id`),
  UNIQUE INDEX `UK_qjxq1cbv7bqsmy9ggh7bfot3l` (`messages_id` ASC) VISIBLE,
  CONSTRAINT `FK1xa8hjom02812ekm4ve5faacs`
    FOREIGN KEY (`chat_room_id`)
    REFERENCES `talkpal`.`chatroom` (`id`),
  CONSTRAINT `FK9u3lrlwsf6lqx0gr3iko9i6kd`
    FOREIGN KEY (`messages_id`)
    REFERENCES `talkpal`.`chatmessage` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`email_token`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`email_token` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`email_token` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `email` VARCHAR(255) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `token` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 14
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`follow`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`follow` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`follow` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `fromuserid` BIGINT(20) NULL DEFAULT NULL,
  `touserid` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FKis406bvgck11r0b5me0cnoc8t` (`fromuserid` ASC) VISIBLE,
  INDEX `FK5ql5f50v6rlb4k87xroc2ub34` (`touserid` ASC) VISIBLE,
  CONSTRAINT `FK5ql5f50v6rlb4k87xroc2ub34`
    FOREIGN KEY (`touserid`)
    REFERENCES `talkpal`.`user` (`id`),
  CONSTRAINT `FKis406bvgck11r0b5me0cnoc8t`
    FOREIGN KEY (`fromuserid`)
    REFERENCES `talkpal`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 47
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`review`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`review` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`review` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `content` VARCHAR(255) NULL DEFAULT NULL,
  `score` BIGINT(20) NULL DEFAULT NULL,
  `fromuserid` BIGINT(20) NULL DEFAULT NULL,
  `touserid` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK181dwqydsx3xjjl6q9382t9qs` (`fromuserid` ASC) VISIBLE,
  INDEX `FKsk56ovr8jskf71yiq6q15775u` (`touserid` ASC) VISIBLE,
  CONSTRAINT `FK181dwqydsx3xjjl6q9382t9qs`
    FOREIGN KEY (`fromuserid`)
    REFERENCES `talkpal`.`user` (`id`),
  CONSTRAINT `FKsk56ovr8jskf71yiq6q15775u`
    FOREIGN KEY (`touserid`)
    REFERENCES `talkpal`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`room`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`room` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`room` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `curnum` BIGINT(20) NULL DEFAULT NULL,
  `maxnum` BIGINT(20) NULL DEFAULT NULL,
  `name` VARCHAR(255) NULL DEFAULT NULL,
  `topic` VARCHAR(255) NULL DEFAULT NULL,
  `uuid` VARCHAR(255) NULL DEFAULT NULL,
  `guest_lang` BIGINT(20) NULL DEFAULT NULL,
  `host_id` BIGINT(20) NULL DEFAULT NULL,
  `host_lang` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FKkmqsor0uekpg9hox2puboouho` (`guest_lang` ASC) VISIBLE,
  INDEX `FKt8cvvbhhhmwmq90bw9qbnt5uw` (`host_id` ASC) VISIBLE,
  INDEX `FK5gpkobrrhxbawy00mn25k1boa` (`host_lang` ASC) VISIBLE,
  CONSTRAINT `FK5gpkobrrhxbawy00mn25k1boa`
    FOREIGN KEY (`host_lang`)
    REFERENCES `talkpal`.`lang` (`id`),
  CONSTRAINT `FKkmqsor0uekpg9hox2puboouho`
    FOREIGN KEY (`guest_lang`)
    REFERENCES `talkpal`.`lang` (`id`),
  CONSTRAINT `FKt8cvvbhhhmwmq90bw9qbnt5uw`
    FOREIGN KEY (`host_id`)
    REFERENCES `talkpal`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 60
DEFAULT CHARACTER SET = utf8mb4;

-- -----------------------------------------------------
-- Table `talkpal`.`userhistory`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `talkpal`.`userhistory` ;

CREATE TABLE IF NOT EXISTS `talkpal`.`userhistory` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `create_date` DATETIME(6) NULL DEFAULT NULL,
  `last_modified_date` DATETIME(6) NULL DEFAULT NULL,
  `from_user_id` BIGINT(20) NULL DEFAULT NULL,
  `to_user_id` BIGINT(20) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `FKi7hh8eip4o7qb7w2r6b4o7cum` (`from_user_id` ASC) VISIBLE,
  INDEX `FK9olsxtl0wwby3b1b79twgge0h` (`to_user_id` ASC) VISIBLE,
  CONSTRAINT `FK9olsxtl0wwby3b1b79twgge0h`
    FOREIGN KEY (`to_user_id`)
    REFERENCES `talkpal`.`user` (`id`),
  CONSTRAINT `FKi7hh8eip4o7qb7w2r6b4o7cum`
    FOREIGN KEY (`from_user_id`)
    REFERENCES `talkpal`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 28
DEFAULT CHARACTER SET = utf8mb4;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
```